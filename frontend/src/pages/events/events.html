<ion-header style="height: 50px;
background-color: #5cbcc1;">

  <ion-icon class="menuStyle" menuToggle name="menu">
  </ion-icon>

    <span class="commName">Habee'Recherche
    </span>




  <ion-icon class="optionsStyle" (click)='presentFilter()' name="options">

    <span *ngIf="activeAllFilters != 0">
      <ion-badge class="pull-right" id="badg-notif">{{activeAllFilters}}</ion-badge>
    </span>
  </ion-icon>


  <ion-icon style="margin-right: 8px" class="optionsStyle" (click)='showsearchbar()' name="search"></ion-icon>

  <ion-title style="width: 66vw; position: relative; top: 20px; left: 10vw;">
    <span style="font-size: 17px;color: white; font-weight: bold"></span>
  </ion-title>

  <expandable-header [ngStyle]="{'display': searchBar}" [scrollArea]="myContent" headerHeight="125">
    <ion-toolbar style="position: relative; top:1vw; overflow: hidden;  ">
      <ion-searchbar [(ngModel)]="queryText" (ionChange)="updateEventlist()" placeholder="Rechercher...">
      </ion-searchbar>
    </ion-toolbar>
  </expandable-header>

</ion-header>


<ion-content class="myview_events" fullscreen #myContent>


  <!-- TODO REFRESH ALL EVENTS-->
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="bubbles"
      refreshingText="Refreshing...">
    </ion-refresher-content>
  </ion-refresher>
  <!-- END OF THE TEMPLATE-->


  <div class="row" [ngStyle]="{'margin-top': topList, 'text-align': 'center'}">
    <ion-col (click)="selectWeeklyEvent()" [ngStyle]="{'border-bottom': weeklyEvBorder}" col-6>
      Cette semaine
    </ion-col>
    <ion-col (click)="selectAllEvent()" [ngStyle]="{'border-bottom': allEvBorder}" col-6>
      Tout
    </ion-col>
  </div>

  <ion-slides #slider pager="false" autoplay="false">

    <ion-slide>
      <ion-item-sliding *ngFor="let event of allEvents">
        <ion-item (click)='goToEventDetail(event)' style="margin-top: 10px" no-lines>
          <ion-thumbnail item-start>
            <img [src]='url + "/" + event.eventPhoto'>
          </ion-thumbnail>
          <h2 style="font-weight: bolder;">{{event.eventName}}</h2>
          <p>{{event.eventLocation}} •
            {{event.eventEndDate.substring(8,10)}}.{{event.eventEndDate.substring(5,
            7)}}.{{event.eventEndDate.substring(0, 4)}} {{event.eventEndHour}}
          </p>
          <span class="styleParticipants">{{event.nbrSubscribedParticipants}}/{{event.nbrParticipants}}</span>
        </ion-item>
      </ion-item-sliding>

    </ion-slide>

    <ion-slide>
      <ion-list [ngStyle]="{'margin-top': topList}">
        <ion-item-sliding *ngFor="let event of allEvents">
          <ion-item (click)='goToEventDetail(event)' style="margin-top: 10px" no-lines>
            <ion-thumbnail item-start>
              <img [src]='url + "/" + event.eventPhoto'>
            </ion-thumbnail>
            <h2 style="font-weight: bolder;">{{event.eventName}}</h2>
            <p>{{event.eventLocation}} •
              {{event.eventEndDate.substring(8,10)}}.{{event.eventEndDate.substring(5,
              7)}}.{{event.eventEndDate.substring(0, 4)}} {{event.eventEndHour}}
            </p>
            <span class="styleParticipants">{{event.nbrSubscribedParticipants}}/{{event.nbrParticipants}}</span>
          </ion-item>
        </ion-item-sliding>
      </ion-list>
    </ion-slide>


  </ion-slides>


  <ion-infinite-scroll (ionInfinite)="doInfinite($event)" *ngIf="page < totalPage">
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data..."></ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>
