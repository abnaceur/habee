<ion-header style="height: 50px;
background-color: #5cbcc1;">

  <ion-icon class="menuStyle" menuToggle name="menu">
  </ion-icon>
  <ion-thumbnail>
    <img class="comLogo" [src]='url + "/" + communityInfo.communityLogo'>
  </ion-thumbnail>
  <ion-thumbnail>
    <span class="commName">{{communityInfo.communityName}}</span>
  </ion-thumbnail>

  <ion-icon class="optionsStyle" (click)='presentFilter()' name="options">

    <span *ngIf="activeAllFilters != 0">
      <ion-badge class="pull-right" id="badg-notif">{{activeAllFilters}}</ion-badge>
    </span>
  </ion-icon>


  <ion-icon style="margin-right: 8px" class="optionsStyle" (click)='showsearchbar()' name="search"></ion-icon>

  <ion-title style="width: 66vw; position: relative; top: 20px; left: 10vw;">
    <span style="font-size: 17px;color: white; font-weight: bold"></span>
  </ion-title>

  <expandable-header [ngStyle]="{'display': searchBar}" [scrollArea]="myContent" headerHeight="125">
    <ion-toolbar style="position: relative; top:1vw; overflow: hidden;  ">
      <ion-searchbar [(ngModel)]="queryText" (ionChange)="updateEventlist()" placeholder="Rechrcher...">
      </ion-searchbar>
    </ion-toolbar>
  </expandable-header>

</ion-header>


<ion-content class="myview_events" fullscreen #myContent>


  <!-- TODO REFRESH ALL EVENTS-->
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="bubbles"
      refreshingText="Refreshing...">
    </ion-refresher-content>
  </ion-refresher>
  <!-- END OF THE TEMPLATE-->


  <!-- OLD DESIGN
    <ion-card *ngFor="let event of allEvents">

      
  
    <ion-item style="background-color: #c1e3e6">
        <ion-icon class="icon-calendar" name="calendar"></ion-icon>
        <span style="text-align: left; margin-left: 30px">{{months[event.eventStartDate.substring(5, 7) - 1]}}</span>
      <span style="font-size: 1 .9em;
      color: #3594cb;">{{event.eventStartDate.substring(8, 10)}}</span>  
       
    </ion-item>
   
        <img [src]='url + "/" + event.eventPhoto'>
        <div class="card-title">{{event.eventName}}</div>
        <div class="card-subtitle">{{event.eventLocation}}</div>
   

    <ion-row no-padding>
        <ion-col>
          <button  (click)='subscribeToEvent(event.eventId)' ion-button clear small color="danger" icon-start>
            <ion-icon name='people'></ion-icon>
            S'inscrir
          </button>
        </ion-col>
        <ion-col text-right>
          <button (click)='goToEventDetail(event)' ion-button clear small color="danger" icon-start>
            <ion-icon name='paw'></ion-icon>
            plus D'info
          </button>
        </ion-col>
      </ion-row>
  

  </ion-card>

  
  
  -->


  <!-- DESIGN WITH TIME LINE AND A PICTURE IN THE IDDLE 
  
  
  
  <timeline endIcon="call" style="position: relative; top: -38">
    <timeline-item *ngFor="let event of allEvents">
      <ion-card>
        <ion-card-content>
          <timeline-time [time]="formatTime(event.eventStartDate.substring(5, 7) - 1, event.eventStartDate.substring(8, 10))"></timeline-time>
          <span class="timeStyle">
            <ion-icon style="display: initial; font-size: 21px;" name="time"></ion-icon>
            {{event.eventStartHour}}
          </span>
          <img style="position: relative; width: 100%; height: 100%;" [src]='url + "/" + event.eventPhoto'>
          <div class="card-title">{{event.eventName}}</div>
        </ion-card-content>
        <ion-row no-padding>
          <ion-col>
            <button  (click)='subscribeToEvent(event.eventId)' ion-button clear small color="danger" icon-start>
                  <ion-icon name='people'></ion-icon>
                  S'inscrir
                </button> 
          </ion-col>
          <ion-col text-right>
            <button (click)='goToEventDetail(event)' ion-button clear small color="danger" icon-start>
              <span style="color:  #46a4da; margin-right: 10px">plus D'info</span>
              <ion-icon name='arrow-forward'></ion-icon>
            </button>
          </ion-col>
        </ion-row>
      </ion-card>
    </timeline-item>

  </timeline>

  -->
  <ion-list style="position: relative; top: 7%" padding>
    <span *ngFor="let item of allEvents">
      <ion-item style="
      background-color: aliceblue;
    border: 1px solid #10B8BB;; margin-top: 4%;" (click)='goToEventDetail(item)'>
        <timeline>
          <timeline-item>
            <timeline-time [time]="formatTime(item.eventStartDate.substring(5, 7) - 1, item.eventStartDate.substring(8, 10))"></timeline-time>
          </timeline-item>
        </timeline>
        <br>
        <ion-row style="position: relative; top: -2vw;
        left: 46%;
        height: 15vw;">
          <h2>{{item.eventName}}<br>
            <p>{{item.eventLocation}} </p><br>
          </h2>
        </ion-row>

        <span class="timeStyle">
          <ion-icon style="display: initial; font-size: 15px;" name="time"></ion-icon>
          {{item.eventStartHour}}
        </span>
        <button ion-button clear item-end>
          <ion-icon name="arrow-forward"></ion-icon>
        </button>
      </ion-item>
    </span>
  </ion-list>


</ion-content>
