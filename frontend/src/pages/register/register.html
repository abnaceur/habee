<!--
  Generated template for the LoginPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-content class="myview" padding>
  <ion-row>
    <ion-col col-12 text-center>
      <div class="center">
        <img src="../../assets/imgs/xxhdpi.png" />
        <ion-label style="font-family: -webkit-body; margin-top:-10px; font-weight:bold;font-size:28px; color:white">
          Habee
        </ion-label>
      </div>
    </ion-col>

  </ion-row>

  <ion-grid style="position:relative; top: 15%">
    <form [formGroup]="authForm" (ngSubmit)="onSubmit(authForm.value)">


      <ion-item style="background-color: white;  opacity: 0.7"
        [ngClass]="{'error-border':!authForm.controls.password.valid && authForm.controls.password.touched}">
        <!--  <ion-label floating>Mot de passe</ion-label> -->
        <ion-input clearOnEdit="false" (ionChange)="requireLastname = false" style="color: darkblue" formControlName="lastname"
          placeholder="Nom" type="text"></ion-input>
      </ion-item>

      <ion-item *ngIf="requireLastname == true">
        <p>Ce champ est obligatoire</p>
      </ion-item>

      <ion-item style="background-color: white;  opacity: 0.7"
        [ngClass]="{'error-border':!authForm.controls.password.valid && authForm.controls.password.touched}">
        <!--  <ion-label floating>Mot de passe</ion-label> -->
        <ion-input clearOnEdit="false" (ionChange)="requireFirstname = false" style="color: darkblue" formControlName="firstname"
          placeholder="Prenom" type="text"></ion-input>
      </ion-item>

      <ion-item *ngIf="requireFirstname == true">
        <p>Ce champ est obligatoire</p>
      </ion-item>


      <ion-item style="background-color: white;  opacity: 0.7 ; color: white"
        [ngClass]="{'error-border':!authForm.controls.email.valid && authForm.controls.email.touched}">
        <!--   <ion-label floating>E-mail</ion-label> -->
        <ion-input clearOnEdit="false" style="color: darkblue" placeholder="Email" formControlName="email" type="text"></ion-input>
      </ion-item>

      <ion-item *ngIf="authForm.controls.email.hasError('required') && authForm.controls.email.touched">
        <p>Ce champ est obligatoire</p>
      </ion-item>

      <ion-item *ngIf="authForm.controls.email.hasError('pattern') && authForm.controls.email.touched">
        <p>L'email n'est pas valide</p>
      </ion-item>

      <ion-item style="background-color: white;  opacity: 0.7"
        [ngClass]="{'error-border':!authForm.controls.password.valid && authForm.controls.password.touched}">
        <!--  <ion-label floating>Mot de passe</ion-label> -->
        <ion-input clearOnEdit="false" (click)="hideValidationPasswordError()" style="color: darkblue" placeholder="Mot de passe"
          formControlName="password" type={{passwordType}}>
        </ion-input>
        <button style="color: blueviolet;  opacity: 10; font-size: 19px;" *ngIf="showPasswordText" ion-button clear
          color="dark" type="button" item-right (click)="showPassword()">
          <ion-icon name="ios-eye-off-outline"></ion-icon>
        </button>
        <button style="color: blueviolet;  opacity: 10; font-size: 19px;" *ngIf="!showPasswordText" ion-button clear
          color="dark" type="button" item-right (click)="showPassword()">
          <ion-icon name="ios-eye-outline"></ion-icon>
        </button>
      </ion-item>

      <ion-item text-wrap
        *ngIf="authForm.controls.password.hasError('minlength') && authForm.controls.password.touched">
        <p>Votre mot de passe doit contenir un minimum de 8 caractères </p>
      </ion-item>

      <ion-item *ngIf="authForm.controls.password.hasError('required') && authForm.controls.password.touched">
        <p>Ce champ est obligatoire</p>
      </ion-item>


      <ion-item style="background-color: white;  opacity: 0.7"
        [ngClass]="{'error-border':!authForm.controls.confPass.valid && authForm.controls.confPass.touched}">
        <!--  <ion-label floating>Mot de passe</ion-label> -->
        <ion-input clearOnEdit="false" (click)="hideValidationPasswordError()" style="color: darkblue" formControlName="confPass"
          placeholder="Confirmez le mot de passe" type={{passwordType}}></ion-input>
        <button style="color: blueviolet;  opacity: 10; font-size: 19px;" *ngIf="showPasswordText" ion-button clear
          color="dark" type="button" item-right (click)="showPassword()">
          <ion-icon name="ios-eye-off-outline"></ion-icon>
        </button>
        <button style="color: blueviolet;  opacity: 10; font-size: 19px;" *ngIf="!showPasswordText" ion-button clear
          color="dark" type="button" item-right (click)="showPassword()">
          <ion-icon name="ios-eye-outline"></ion-icon>
        </button>
      </ion-item>

      <ion-item *ngIf="validatePasswords != ''">
        <p>{{validatePasswords}}</p>
      </ion-item>

      <ion-item *ngIf="authForm.controls.confPass.hasError('required') && authForm.controls.confPass.touched">
        <p>Ce champ est obligatoire!</p>
      </ion-item>

    </form>
  </ion-grid>

</ion-content>

<ion-footer>
<form [formGroup]="authForm" (ngSubmit)="onSubmit(authForm.value)">
  <div style="z-index:111; position: absolute; background-color: transparent; bottom: 0px; width: 100%">
    <div class="row">
      <button type="button" ion-button (click)="goTologinPage()" style="color: #45D8E5; background-color:#FFFFFF;"
        class="col col-50 button button-block">
        <ion-icon style="color: #45D8E5;" name='arrow-backward'></ion-icon> RETOUR
      </button>

      <button type="submit" ion-button
        style="color:wite; background-color:rgb(31, 199, 214);" class="col col-50 button button-block">CRÉER</button>
    </div>
  </div>
</form>
</ion-footer>